<!doctype html>
<html>
<head>
    <title></title>
    <style>
        html,
        body {
            margin: 0;
        }

        body {
            height: 100vh;
        }

        .container {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progression {
            align-items: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }

        .progression-top {
            background: #333;
            width: 100%;
        }

        .progression-bottom {
            display: flex;
            width: 100%;
        }

        .box {
            flex-shrink: 0;
        }
    </style>

</head>
<body>
    <div class="container">
        <div class="progression">
            <div class="progression-top"></div>
            <div class="progression-bottom"></div>
        </div>
    </div>


    <script>
        var toPctStr = function(value) { return value * 100 + '%'; };

        var genRandColorHexStr = function() {
            return '#' + ('00000' + (Math.random() * (1 << 24) | 0).toString(16)).slice(-6);
        };

        var NUM_BARS_TO_NORMALIZED_WIDTH = {
            5: 23,
            8: 87,
        };

        var NUM_BARS = Math.random() > 0.5 ? 5 : 8;
        var NORMALIZED_WIDTH = NUM_BARS_TO_NORMALIZED_WIDTH[NUM_BARS];
        var SERIES = [1, 1, 2, 3, 5, 8, 13, 21].slice(0, NUM_BARS);

        var $progression = document.querySelector('.progression');
        var $top = document.querySelector('.progression-top');
        var $bottom = document.querySelector('.progression-bottom');

        $progression.style.width = '90vw';
        $top.style.background = genRandColorHexStr();
        $top.style.height = (SERIES[0] / NORMALIZED_WIDTH * 90) + 'vw';

        if (Math.random() > 0.5) {
            $progression.style.transform = 'scale(-1, 1)';
        }


        var BAR_COLOR = genRandColorHexStr();

        for (let i = 0; i < NUM_BARS; i++) {
            var bar = document.createElement('div');

            bar.className = 'box';
            bar.style.background = BAR_COLOR;
            bar.style.marginRight = toPctStr(SERIES[NUM_BARS - (NUM_BARS === 5 ? 1 : 2) - i] / NORMALIZED_WIDTH);
            bar.style.height = (SERIES[0] / NORMALIZED_WIDTH * 90) + 'vw';
            bar.style.width = toPctStr(SERIES[i] / NORMALIZED_WIDTH);

            $bottom.appendChild(bar);
        }
    </script>
</body>
</html>
